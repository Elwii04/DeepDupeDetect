# Embedding Compression Test Report

**Generated:** 2026-02-07T11:29:20.164499  
**Database:** H:\Raw Datasets\Pinterest Downloader\Downloads\image_database - Kopie.db  
**Test Images:** None

## Summary

### Original Embeddings

- **Model:** DINOv3 ViT-L (from database)
- **Dimension:** 1024
- **Samples:** 79893
- **Storage:** 312.08 MB

### Compression Methods

| Method | Compression Ratio | Storage Saved | Pearson | Spearman | Recall@10 | NDCG@10 | MRR |
|--------|-------------------|---------------|---------|----------|-----------|---------|-----|
| BINARY_SIGN | 31.03x | 96.8% | 0.9430 | 0.8963 | 0.6669 | 0.7370 | 0.7277 |
| FLOAT16 | 2.00x | 50.0% | 1.0000 | 1.0000 | 1.0000 | 1.0000 | 1.0000 |
| INT8_VEC_MAXABS | 3.98x | 74.9% | 1.0000 | 1.0000 | 0.9945 | 0.9965 | 0.9965 |
| INT8_VEC_MINMAX | 3.97x | 74.8% | 1.0000 | 1.0000 | 0.9937 | 0.9960 | 0.9930 |


## Detailed Results

### Baseline: DINOv3 ViT-L (from database)

- **Dimension:** 1024
- **Storage:** 312.08 MB
- **Samples:** 79893

### Compression Analysis

#### BINARY_SIGN Quantization

**Storage:**
- Compression Ratio: 31.03x
- Original Size: 312.08 MB
- Compressed Size: 10.06 MB
- Space Saved: 96.8%

**Similarity Preservation:**
- Pearson: 0.9430
- Spearman: 0.8963
- RMSE: 0.429199
- Mean Absolute Error: 0.420698
- P95 Error: 0.521080
- Max Error: 0.604377

**Ranking Metrics:**
- MRR: 0.7277
- Recall@1: 0.6030 | NDCG@1: 0.6030 | Jaccard@1: 0.6030
- Recall@5: 0.6462 | NDCG@5: 0.7060 | Jaccard@5: 0.5126
- Recall@10: 0.6669 | NDCG@10: 0.7370 | Jaccard@10: 0.5262
- Recall@20: 0.6792 | NDCG@20: 0.7521 | Jaccard@20: 0.5315
- Recall@50: 0.7028 | NDCG@50: 0.7684 | Jaccard@50: 0.5555
- Recall@100: 0.7143 | NDCG@100: 0.7720 | Jaccard@100: 0.5672

#### FLOAT16 Quantization

**Storage:**
- Compression Ratio: 2.00x
- Original Size: 312.08 MB
- Compressed Size: 156.04 MB
- Space Saved: 50.0%

**Similarity Preservation:**
- Pearson: 1.0000
- Spearman: 1.0000
- RMSE: 0.000010
- Mean Absolute Error: 0.000008
- P95 Error: 0.000019
- Max Error: 0.000043

**Ranking Metrics:**
- MRR: 1.0000
- Recall@1: 1.0000 | NDCG@1: 1.0000 | Jaccard@1: 1.0000
- Recall@5: 0.9998 | NDCG@5: 0.9999 | Jaccard@5: 0.9997
- Recall@10: 1.0000 | NDCG@10: 1.0000 | Jaccard@10: 1.0000
- Recall@20: 0.9999 | NDCG@20: 0.9999 | Jaccard@20: 0.9998
- Recall@50: 0.9999 | NDCG@50: 0.9999 | Jaccard@50: 0.9997
- Recall@100: 0.9999 | NDCG@100: 0.9999 | Jaccard@100: 0.9998

#### INT8_VEC_MAXABS Quantization

**Storage:**
- Compression Ratio: 3.98x
- Original Size: 312.08 MB
- Compressed Size: 78.33 MB
- Space Saved: 74.9%

**Similarity Preservation:**
- Pearson: 1.0000
- Spearman: 1.0000
- RMSE: 0.000408
- Mean Absolute Error: 0.000323
- P95 Error: 0.000804
- Max Error: 0.001871

**Ranking Metrics:**
- MRR: 0.9965
- Recall@1: 0.9930 | NDCG@1: 0.9930 | Jaccard@1: 0.9930
- Recall@5: 0.9926 | NDCG@5: 0.9951 | Jaccard@5: 0.9877
- Recall@10: 0.9945 | NDCG@10: 0.9965 | Jaccard@10: 0.9900
- Recall@20: 0.9948 | NDCG@20: 0.9966 | Jaccard@20: 0.9900
- Recall@50: 0.9958 | NDCG@50: 0.9971 | Jaccard@50: 0.9918
- Recall@100: 0.9964 | NDCG@100: 0.9974 | Jaccard@100: 0.9929

#### INT8_VEC_MINMAX Quantization

**Storage:**
- Compression Ratio: 3.97x
- Original Size: 312.08 MB
- Compressed Size: 78.63 MB
- Space Saved: 74.8%

**Similarity Preservation:**
- Pearson: 1.0000
- Spearman: 1.0000
- RMSE: 0.000595
- Mean Absolute Error: 0.000471
- P95 Error: 0.001173
- Max Error: 0.002741

**Ranking Metrics:**
- MRR: 0.9930
- Recall@1: 0.9860 | NDCG@1: 0.9860 | Jaccard@1: 0.9860
- Recall@5: 0.9936 | NDCG@5: 0.9958 | Jaccard@5: 0.9893
- Recall@10: 0.9937 | NDCG@10: 0.9960 | Jaccard@10: 0.9885
- Recall@20: 0.9941 | NDCG@20: 0.9962 | Jaccard@20: 0.9889
- Recall@50: 0.9940 | NDCG@50: 0.9959 | Jaccard@50: 0.9883
- Recall@100: 0.9948 | NDCG@100: 0.9962 | Jaccard@100: 0.9896


## Recommendations

Based on the test results:

### For Maximum Quality (minimal loss):
- **Use Float16**: Nearly identical quality with 2x compression
- Best for production use where accuracy is critical

### For Balanced Performance:
- **Use Int8**: Good compression (4x) with typically <5% quality loss
- Best for most real-world applications

### For Maximum Speed/Compression:
- **Use Binary**: 32x compression, but significant quality loss
- Best for initial filtering with float32/int8 rescoring on top candidates
- Not recommended as sole method

### Practical Recommendations:

1. **If storage is not an issue**: Keep float32 or use float16 (minimal risk)
2. **If storage is tight**: Use int8 (good balance, test recall first)
3. **For massive scale**: Two-stage retrieval with binary + int8 rescoring
